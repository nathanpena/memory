<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @passage.name %>
</p>

<p>
  <div id="passage"></div>
</p>

<div>
  <textarea id="textarea" rows="4" cols="50">
  </textarea>
</div>

<%= link_to 'Edit', edit_passage_path(@passage) %> |
<%= link_to 'Back', passages_path %>
<script type="text/javascript">
  $( document ).ready(function() {
    $('#textarea').text("");
    var passage = "<%= @passage.passage %>";
    console.log(passage);
  $('#textarea').bind('input propertychange', function() {
      var text_input = $("#textarea").val();
      var text_input_length = text_input.length;
      if (text_input == passage.substring(0,text_input_length)){
        $("#passage").text(text_input);
        if (text_input.length == passage.length){
          setInterval(function(){passage_complete()},200);
        }
      }else {
        alert("You got something wrong");
      }
});
});
  function passage_complete() {
    alert("Great Job, you memorized the passage.");
    location.reload();
  }
</script>